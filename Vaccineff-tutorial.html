<!DOCTYPE html>
<!-- START: inst/pkgdown/templates/layout.html --><!-- Generated by pkgdown: do not edit by hand --><html lang="es"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><title>Análisis de Brotes y Modelamiento en Salud Pública: Introducción al cálculo de efectividad vacunal con cohortes usando vaccineff</title><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" type="text/css" href="assets/styles.css"><script src="assets/scripts.js" type="text/javascript"></script><!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-XZ471458FQ"></script><script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-XZ471458FQ');
    </script><!-- mathjax --><script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      config: ["MMLorHTML.js"],
      jax: ["input/TeX","input/MathML","output/HTML-CSS","output/NativeMML", "output/PreviewHTML"],
      extensions: ["tex2jax.js","mml2jax.js","MathMenu.js","MathZoom.js", "fast-preview.js", "AssistiveMML.js", "a11y/accessibility-menu.js"],
      TeX: {
        extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"]
      },
      tex2jax: {
        inlineMath: [['\\(', '\\)']],
        displayMath: [ ['$$','$$'], ['\\[', '\\]'] ],
        processEscapes: true
      }
    });
    </script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><!-- Responsive Favicon for The Carpentries --><link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png"><link rel="manifest" href="site.webmanifest"><link rel="mask-icon" href="safari-pinned-tab.svg" color="#5bbad5"><meta name="msapplication-TileColor" content="#da532c"><meta name="theme-color" content="#ffffff"></head><body>
    <header id="top" class="navbar navbar-expand-md navbar-light bg-white top-nav incubator"><a class="visually-hidden-focusable skip-link" href="#main-content">Ir al contenido principal</a>
  <div class="container-fluid top-nav-container">
    <div class="col-md-6">
      <div class="large-logo">
        <img alt="Epiverse-TRACE" src="assets/images/logo_epimodelac.png"><abbr class="badge badge-light" title="Esta lección se encuentra en la fase pre-alfa, lo que significa que está en las primeras etapas de desarrollo, pero aún no se ha enseñado." style="background-color: #FF4955; border-radius: 5px">
          <a href="https://cdh.carpentries.org/the-lesson-life-cycle.html#early-development-pre-alpha-through-alpha" class="external-link alert-link" style="color: #FFF">
            <i aria-hidden="true" class="icon" data-feather="alert-octagon" style="border-radius: 5px"></i>
            Pre-Alfa
          </a>
          <span class="visually-hidden">Esta lección se encuentra en la fase pre-alfa, lo que significa que está en las primeras etapas de desarrollo, pero aún no se ha enseñado.</span>
        </abbr>

      </div>
    </div>
    <div class="selector-container">


      <div class="dropdown">
        <button class="btn btn-secondary dropdown-toggle bordered-button" type="button" id="dropdownMenu1" data-bs-toggle="dropdown" aria-expanded="false">
          <i aria-hidden="true" class="icon" data-feather="eye"></i> Vista de estudiante <i data-feather="chevron-down"></i>
        </button>
        <ul class="dropdown-menu" aria-labelledby="dropdownMenu1"><li><button class="dropdown-item" type="button" onclick="window.location.href='instructor/Vaccineff-tutorial.html';">Vista de la instructora</button></li>
        </ul></div>
    </div>
  </div>
  <hr></header><nav class="navbar navbar-expand-xl navbar-light bg-white bottom-nav incubator" aria-label="Navegación principal"><div class="container-fluid nav-container">
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Alternar navegación">
      <span class="navbar-toggler-icon"></span>
      <span class="menu-title">Menú</span>
    </button>
    <div class="nav-logo">
      <img class="small-logo" alt="Epiverse-TRACE" src="assets/images/epiverse-logo.svg"></div>
    <div class="lesson-title-md">
      Análisis de Brotes y Modelamiento en Salud Pública
    </div>
    <div class="search-icon-sm">
      <!-- TODO: do not show until we have search
        <i role="img" aria-label="Buscar en la página All In One" data-feather="search"></i>
      -->
    </div>
    <div class="desktop-nav">
      <ul class="navbar-nav me-auto mb-2 mb-lg-0"><li class="nav-item">
          <span class="lesson-title">
            Análisis de Brotes y Modelamiento en Salud Pública
          </span>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="key-points.html">Puntos Clave</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="reference.html#glossary">Glosario</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="profiles.html">Perfiles de estudiante</a>
        </li>
        <li class="nav-item dropdown">
          <button class="nav-link dropdown-toggle" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
            Más <i data-feather="chevron-down"></i>
          </button>
          <ul class="dropdown-menu" aria-labelledby="navbarDropdown"><li><a class="dropdown-item" href="reference.html">Reference</a></li>
          </ul></li>
      </ul></div>
    <form class="d-flex col-md-2 search-form">
      <fieldset disabled><input class="form-control me-2 searchbox" type="search" placeholder="" aria-label=""><button class="btn btn-outline-success tablet-search-button" type="submit">
          <i class="search-icon" data-feather="search" role="img" aria-label="Buscar en la página All In One"></i>
        </button>
      </fieldset></form>
  </div><!--/div.container-fluid -->
</nav><div class="col-md-12 mobile-title">
  Análisis de Brotes y Modelamiento en Salud Pública
</div>

<aside class="col-md-12 lesson-progress"><div style="width: 78%" class="percentage">
    78%
  </div>
  <div class="progress incubator">
    <div class="progress-bar incubator" role="progressbar" style="width: 78%" aria-valuenow="78" aria-label="Progreso de la lección" aria-valuemin="0" aria-valuemax="100">
    </div>
  </div>
</aside><div class="container">
      <div class="row">
        <!-- START: inst/pkgdown/templates/navbar.html -->
<div id="sidebar-col" class="col-lg-4">
  <div id="sidebar" class="sidebar">
      <nav aria-labelledby="flush-headingEleven"><button role="button" aria-label="Cerrar menú" alt="Cerrar menú" aria-expanded="true" aria-controls="sidebar" class="collapse-toggle" data-collapse="Cerrar " data-episodes="Episodios ">
          <i class="search-icon" data-feather="x" role="img"></i>
        </button>
        <div class="sidebar-inner">
          <div class="row mobile-row">
            <div class="col">
              <div class="sidenav-view-selector">
                <div class="accordion accordion-flush" id="accordionFlush9">
                  <div class="accordion-item">
                    <h2 class="accordion-header" id="flush-headingNine">
                      <button class="accordion-button collapsed" id="instructor" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseNine" aria-expanded="false" aria-controls="flush-collapseNine">
                        <i id="eye" aria-hidden="true" class="icon" data-feather="eye"></i> Vista de estudiante
                      </button>
                    </h2>
                    <div id="flush-collapseNine" class="accordion-collapse collapse" aria-labelledby="flush-headingNine" data-bs-parent="#accordionFlush2">
                      <div class="accordion-body">
                        <a href="instructor/Vaccineff-tutorial.html">Vista de la instructora</a>
                      </div>
                    </div>
                  </div><!--/div.accordion-item-->
                </div><!--/div.accordion-flush-->
              </div><!--div.sidenav-view-selector -->
            </div><!--/div.col -->

            <hr></div><!--/div.mobile-row -->

          <div class="accordion accordion-flush" id="accordionFlush11">
            <div class="accordion-item">

              <button id="chapters" class="accordion-button show" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseEleven" aria-expanded="false" aria-controls="flush-collapseEleven">
                <h2 class="accordion-header chapters" id="flush-headingEleven">
                  EPISODIOS
                </h2>
              </button>
              <div id="flush-collapseEleven" class="accordion-collapse show collapse" aria-labelledby="flush-headingEleven" data-bs-parent="#accordionFlush11">

                <div class="accordion-body">
                  <div class="accordion accordion-flush" id="accordionFlush1">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading1">
        <a href="index.html">Resumen y configuración</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush2">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading2">
        <a href="TallerIntroAnaliticaBrotes.html">1. Introducción a la analítica de brotes</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush3">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading3">
        <a href="ZIKAB.html">2. Construyendo un modelo matemático simple para Zika</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush4">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading4">
        <a href="EnfermedadX.html">3. Estimación de las distribuciones de rezagos epidemiológicos: Enfermedad X</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush5">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading5">
        <a href="Sivirep-tutorial.html">4. Generar reportes a partir de bases de datos de vigilancia epidemiológica usando sivirep</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush6">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading6">
        <a href="Serofoi-tutorial.html">5. Estima la fuerza de infección a partir de encuestas serológicas usando serofoi</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlushcurrent">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-headingcurrent">
      <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapsecurrent" aria-expanded="true" aria-controls="flush-collapsecurrent">
        <span class="visually-hidden">Current Chapter</span>
        <span class="current-chapter">
        6. Introducción al cálculo de efectividad vacunal con cohortes usando vaccineff
        </span>
      </button>
    </div><!--/div.accordion-header-->

    <div id="flush-collapsecurrent" class="accordion-collapse collapse show" aria-labelledby="flush-headingcurrent" data-bs-parent="#accordionFlushcurrent">
      <div class="accordion-body">
        <ul><li><a href="#introducci%C3%B3n">1. Introducción</a></li>
<li><a href="#objetivos">2. Objetivos</a></li>
<li><a href="#conceptos-b%C3%A1sicos-a-desarrollar">3. Conceptos básicos a desarrollar</a></li>
<li><a href="#caso-de-uso-del-paquete">4. Caso de uso del paquete</a></li>
<li><a href="#reflexi%C3%B3n">5. Reflexión</a></li>
<li><a href="#reto">Reto</a></li>
        </ul></div><!--/div.accordion-body-->
    </div><!--/div.accordion-collapse-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

<div class="accordion accordion-flush" id="accordionFlush8">
  <div class="accordion-item">
    <div class="accordion-header" id="flush-heading8">
        <a href="epiCo-tutorial.html">7. Indicadores demográficos, canales endémicos y clusters de incidencia usando epiCo</a>
    </div><!--/div.accordion-header-->

  </div><!--/div.accordion-item-->
</div><!--/div.accordion-flush-->

                </div>
              </div>
            </div>

            <hr class="half-width"><div class="accordion accordion-flush resources" id="accordionFlush12">
              <div class="accordion-item">
                <h2 class="accordion-header" id="flush-headingTwelve">
                  <button class="accordion-button collapsed" id="resources" type="button" data-bs-toggle="collapse" data-bs-target="#flush-collapseTwelve" aria-expanded="false" aria-controls="flush-collapseTwelve">
                    RECURSOS
                  </button>
                </h2>
                <div id="flush-collapseTwelve" class="accordion-collapse collapse" aria-labelledby="flush-headingTwelve" data-bs-parent="#accordionFlush12">
                  <div class="accordion-body">
                    <ul><li>
                        <a href="key-points.html">Puntos Clave</a>
                      </li>
                      <li>
                        <a href="reference.html#glossary">Glosario</a>
                      </li>
                      <li>
                        <a href="profiles.html">Perfiles de estudiante</a>
                      </li>
                      <li><a href="reference.html">Reference</a></li>
                    </ul></div>
                </div>
              </div>
            </div>
            <hr class="half-width resources"><a href="aio.html">Todo en una sola página</a>


            <hr class="d-none d-sm-block d-md-none"><div class="d-grid gap-1">

            </div>
          </div><!-- /div.accordion -->
        </div><!-- /div.sidebar-inner -->
      </nav></div><!-- /div.sidebar -->
  </div><!-- /div.sidebar-col -->
<!-- END:   inst/pkgdown/templates/navbar.html-->

        <!-- START: inst/pkgdown/templates/content-instructor.html -->
  <div class="col-xl-8 col-lg-12 primary-content">
    <nav class="lesson-content mx-md-4" aria-label="Capítulo previo y siguiente"><!-- content for small screens --><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="Serofoi-tutorial.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previo</a>
        <a class="chapter-link float-end" href="epiCo-tutorial.html">Siguiente<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="Serofoi-tutorial.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previo: Estima la fuerza de
        </a>
        <a class="chapter-link float-end" href="epiCo-tutorial.html" rel="next">
          Siguiente: Indicadores...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
      <hr></nav><main id="main-content" class="main-content"><div class="container lesson-content">
        <h1>Introducción al cálculo de efectividad vacunal con cohortes usando vaccineff</h1>
        <p>Última actualización: 2025-03-25 |

        <a href="https://github.com/epiverse-trace/epimodelac/edit/main/episodes/Vaccineff-tutorial.Rmd" class="external-link">Mejora esta página <i aria-hidden="true" data-feather="edit"></i></a></p>



        <div class="text-end">
          <button role="button" aria-pressed="false" tabindex="0" id="expand-code" class="pull-right" data-expand="Mostrar todas las soluciones " data-collapse="Cerrar todas las soluciones "> Mostrar todas las soluciones <i aria-hidden="true" data-feather="plus"></i></button>
        </div>

        

<div class="overview card">
<h2 class="card-header">Hoja de ruta</h2>
<div class="row g-0">
<div class="col-md-4">
<div class="card-body">
<div class="inner">
<h3 class="card-title">Preguntas</h3>
<ul><li>¿Cómo realizar el cálculo de efectividad vacunal con cohortes usando
vaccineff?</li>
</ul></div>
</div>
</div>
<div class="col-md-8">
<div class="card-body">
<div class="inner bordered">
<h3 class="card-title">Objetivos</h3>
<p>Al final de este taller usted podrá:</p>
<ul><li><p>Estudiar algunos de los conceptos claves para la implementación
de estudios observacionales con diseño de cohortes</p></li>
<li><p>Calcular las métricas claves para llevar a cabo un estudio de
cohortes</p></li>
<li><p>Discutir las ventajas y desventajas de los métodos de estimación
no paramétricos y semi-paramétricos de modelos de
superviviencia</p></li>
<li><p>Aplicar estrategias de emparejamiento de casos y control y
discutir su potencial efecto sobre los estudios de cohortes</p></li>
<li><p>Estimar la efectividad vacunal haciendo uso de un diseño de
cohortes</p></li>
</ul></div>
</div>
</div>
</div>
</div>
<section><h2 class="section-heading" id="introducción">1. Introducción<a class="anchor" aria-label="anchor" href="#introducci%C3%B3n"></a></h2>
<hr class="half-width"><p>En esta sesión se espera que los participantes se familiaricen con
uso del paquete de R<code>vaccineff</code>. Utilizaremos el diseño de
cohortes para estimar la efectividad vacunal de un conjunto de datos de
prueba y analizaremos los resultados obtenidos.</p>
</section><section><h2 class="section-heading" id="objetivos">2. Objetivos<a class="anchor" aria-label="anchor" href="#objetivos"></a></h2>
<hr class="half-width"><ul><li><p>Estudiar algunos de los conceptos claves para la implementación
de estudios observacionales con diseño de cohortes</p></li>
<li><p>Calcular las métricas claves para llevar a cabo un estudio de
cohortes</p></li>
<li><p>Discutir las ventajas y desventajas de los métodos de estimación
no paramétricos y semi-paramétricos de modelos de
superviviencia</p></li>
<li><p>Aplicar estrategias de emparejamiento de casos y control y
discutir su potencial efecto sobre los estudios de cohortes</p></li>
<li><p>Estimar la efectividad vacunal haciendo uso de un diseño de
cohortes</p></li>
</ul></section><section><h2 class="section-heading" id="conceptos-básicos-a-desarrollar">3. Conceptos básicos a desarrollar<a class="anchor" aria-label="anchor" href="#conceptos-b%C3%A1sicos-a-desarrollar"></a></h2>
<hr class="half-width"><p>En esta práctica se desarrollarán los siguientes conceptos:</p>
<ul><li><p>Eficacia y Efectividad vacunal</p></li>
<li><p>Tiempo de inducción o “delays” en el análisis de efectividad de
vacunas</p></li>
<li><p>Diseños observacionales para el estudio de la efectividad
vacunal</p></li>
<li><p>Diseño de cohortes para estimación de la efectividad
vacunal</p></li>
<li><p>Estimador no paramétrico Kaplan-Meier</p></li>
<li><p>Modelo semi-paramétrico de Cox</p></li>
<li><p>Riesgos proporcionales</p></li>
</ul><div class="section level3">
<h3 id="eficacia-vs-efectividad-vacunal"><strong>3.1. Eficacia vs Efectividad vacunal</strong><a class="anchor" aria-label="anchor" href="#eficacia-vs-efectividad-vacunal"></a></h3>
<p><strong>Eficacia:</strong></p>
<ul><li><p>Se refiere a la capacidad de lograr un efecto deseado o esperado
bajo condiciones ideales o controladas.</p></li>
<li><p>Es una medida teórica. En experimentos clínicos, por ejemplo, la
eficacia de un medicamento se evalúa en condiciones controladas, donde
todos los factores externos están cuidadosamente regulados para
determinar el rendimiento puro del medicamento.</p></li>
<li><p>Puede considerarse como “lo que puede hacer” una intervención en
las mejores circunstancias posibles.</p></li>
</ul><p><strong>Efectividad:</strong></p>
<ul><li><p>Se refiere a qué tan bien funciona una intervención en
condiciones “reales” o prácticas, fuera de un entorno
controlado.</p></li>
<li><p>Es una medida práctica. En el contexto de los medicamentos, la
efectividad se refiere a qué tan bien funciona un medicamento en el
“mundo real”, donde las condiciones no están tan controladas y hay
muchos factores variables.</p></li>
<li><p>Puede considerarse como “lo que realmente hace” una intervención
en circunstancias típicas o cotidianas.</p></li>
</ul><table class="table"><colgroup><col width="100%"></colgroup><tbody><tr class="odd"><td>Un ejemplo podría ser un medicamento que en experimentos clínicos
(en condiciones ideales) mostró una eficacia del 95% en prevenir el
desenlace. Sin embargo, cuando se usó en el contexto general,
considerando factores como la adherencia al tratamiento, interacciones
con otros medicamentos y variabilidad en la población, su efectividad
fue del 85%. Aquí, la eficacia muestra el potencial del medicamento bajo
condiciones ideales, mientras que la efectividad muestra cómo funciona
en situaciones cotidianas.</td>
</tr></tbody></table><p>En el caso de las vacunas la efectividad hace referencia a la
disminución proporcional de casos de una enfermedad o evento en una
población vacunada comparada con una población no vacunada, en
condiciones del mundo real.</p>
</div>
<div class="section level3">
<h3 id="tiempo-de-inducción"><strong>3.2. Tiempo de inducción</strong><a class="anchor" aria-label="anchor" href="#tiempo-de-inducci%C3%B3n"></a></h3>
<p>El tiempo de inducción o <em>“delay”</em> se refiere al periodo
necesario para que la vacuna administrada induzca una respuesta inmune
protectora frente a la infección o la enfermedad provocada por un
patógeno. Si ocurre una infección entre el momento de la vacunación y el
momento donde se prevé exista una respuesta inmune protectora, ocurrirá
la infección de manera natural y no se considera un fallo de la vacuna
en cuestión, puesto que la persona inmunizada aún no contaba con la
protección conferida por la vacuna.</p>
</div>
<div class="section level3">
<h3 id="diseños-observacionales-para-el-estudio-de-la-efectividad-vacunal"><strong>3.3. Diseños observacionales para el estudio de la
efectividad vacunal</strong><a class="anchor" aria-label="anchor" href="#dise%C3%B1os-observacionales-para-el-estudio-de-la-efectividad-vacunal"></a></h3>
<p>Por múltiples razones, los estudios observacionales son los más
utilizados en la estimación de la efectividad vacunal. Existen múltiples
diseños, entre ellos: diseño de cohortes, diseño de casos y controles,
diseño de test-negativo, diseño “screening-method”. La elección del
diseño, dependerá de la disponibilidad de información y los recursos
disponibles para llevar a cabo el estudio.</p>
</div>
<div class="section level3">
<h3 id="diseño-de-cohorte-para-el-estudio-de-la-efectividad-vacunal"><strong>3.4. Diseño de cohorte para el estudio de la efectividad
vacunal</strong><a class="anchor" aria-label="anchor" href="#dise%C3%B1o-de-cohorte-para-el-estudio-de-la-efectividad-vacunal"></a></h3>
<p>El término cohorte se refiere a un grupo de personas que comparten
una característica común. En los estudios con diseño de cohorte, existen
dos o más poblaciones que difieren en una característica o exposición y
se realiza un seguimiento a ambos grupos para evaluar la aparición de
uno o más desenlaces de interés y comparar la incidencia de los eventos
entre ambos grupos. Para el caso de los estudios de la efectividad de
vacunas, la exposición de interés corresponde a la aplicación de la
vacuna y los desenlaces pueden incluir:</p>
<ul><li><p>Infección: contagio con el patógeno de interés tras una
exposición a alguien infeccioso</p></li>
<li><p>Enfermedad: desarrollo de signos y síntomas relacionados con la
infección con un patógeno. Puede tener diferentes grados de severidad,
requerir ingreso a hospitalización, UCI o incluso conducir a la
muerte.</p></li>
<li><p>A la hora de llevar a cabo estos estudios se debe garantizar que
las personas incluidas en cada población no tengan el desenlace de
interés que será evaluado durante el seguimiento. Así mismo, es
importante que el seguimiento se lleve a cabo de manera igual de
rigurosa y por el mismo tiempo en ambos grupos.</p></li>
</ul><p>La efectividad vacunal corresponde a la reducción relativa del riesgo
de desarrollar la infección y/o enfermedad. En los estudios de cohorte
se puede estimar el riesgo relativo, los <em>odds ratio</em> o los
<em>hazard ratio</em> que expresa el riesgo que tiene la cohorte no
expuesta comparado con la cohorte de los expuestos. La efectividad
vacunal será, por lo tanto, el complemento del riesgo proporcional en la
cohorte de expuestos.</p>
<p>Veamos esto con un ejemplo: para evaluar la efectividad de una vacuna
para prevenir el desarrollo de enfermedad en una población, al cabo del
seguimiento la incidencia en la cohorte vacunada fue de 1 por 1000
habitantes y en la cohorte no vacunada fue de 5 por 1000 habitantes. En
este caso, tenemos que el riesgo relativo en la población vacunada fue
0.001/0.005 = 0,2. Es decir, la población vacunada tuvo una incidencia
correspondiente al 20% de la incidencia de la población no vacunada.
Esta reducción se puede atribuir a la vacuna y para estimarla usaríamos
el complemento, que corresponde a 1 - 0,2= 0,8. Es decir que la
reducción que se observó corresponde a un 80% y se puede atribuir a la
vacuna, por lo tanto, la efectividad de la vacunación fue del 80% para
evitar la enfermedad.</p>
</div>
<div class="section level3">
<h3 id="métodos-estadísticos-para-análisis-de-efectividad-vacunal"><strong>3.5. Métodos estadísticos para análisis de efectividad
vacunal</strong><a class="anchor" aria-label="anchor" href="#m%C3%A9todos-estad%C3%ADsticos-para-an%C3%A1lisis-de-efectividad-vacunal"></a></h3>
<p>En el diseño de cohortes se utilizan principalmente dos métodos:
Estimación no paramétrica de Kapplan-Meier y Modelo semi-paramétrico de
Cox</p>
<div class="section level5">
<h5 id="estimador-kaplan-meier"><strong>Estimador Kaplan-Meier</strong><a class="anchor" aria-label="anchor" href="#estimador-kaplan-meier"></a></h5>
<p>El estimador Kaplan-Meier utiliza las tasas de incidencia de un
evento para cuantificar la probabilidad de supervivencia <span class="math inline">\(S(t)\)</span> de forma no paramétrica, es decir,
sin una representación matemática funcional. En general, la incidencia
acumulada de cada grupo permite cuantificar el riesgo de presentar el
evento como <span class="math inline">\(1 - S(t)\)</span>. Asimismo, la
comparación entre el riesgo de ambos grupos en un punto del tiempo
determina el riesgo relativo entre grupos (<span class="math inline">\(RR\)</span>). A partir de esta se estima la
efectividad vacunal como: <span class="math display">\[V_{EFF} = 1 -
RR\]</span></p>
</div>
<div class="section level5">
<h5 id="modelo-de-regresión-de-cox"><strong>Modelo de Regresión de Cox</strong><a class="anchor" aria-label="anchor" href="#modelo-de-regresi%C3%B3n-de-cox"></a></h5>
<p>El modelo Cox, permite estimar de forma semi-paramétrica la función
de riesgo instantáneo <span class="math inline">\(\lambda(t|x_i)\)</span> de un individuo <span class="math inline">\(i\)</span> en terminos de sus características, las
cuales se asocian a un conjunto de covariables <span class="math inline">\(x_1, x_2, ..., x_n\)</span>, con lo cual se
tiene:</p>
<p><span class="math display">\[\lambda(t|x_i) = \lambda_0(t)
\exp(\beta_1 x_{i1} + \beta_2 x_{i2} + ....+\beta_n x_{in})\]</span>
donde <span class="math inline">\(\beta_1, \beta_2, ...,
\beta_n\)</span> son los coeficientes de la regresión y <span class="math inline">\(\lambda_0\)</span> es una función basal no
especificada, por lo que el modelo se asume como semi-paramétrico. En el
caso en el que la función de riesgo instantáneo es completamente
especificada, es decir, se conoce la forma funcional de <span class="math inline">\(\lambda_0(t)\)</span>, es posible calcular
matemáticamente la probabilidad de supervivencia. Sin embargo, ninguna
de estas funciones puede ser estimada directamente del modelo de Cox.
Por el contrario, con este se busca estimar el <em>hazard ratio</em>,
una medida de riesgos comparativa entre dos individuos <span class="math inline">\(i\)</span> y <span class="math inline">\(j\)</span> con características <span class="math inline">\(x_{i1}, x_{i2}, ..., x_{in}\)</span> y <span class="math inline">\(x_{j1}, x_{j2}, ..., x_{jn}\)</span>,
respectivamente. En este orden, al evaluar el riesgo de un individuo con
respecto al otro se tiene:</p>
<p><span class="math display">\[HR =
\frac{\lambda(t|x_i)}{\lambda(t|x_j)} = \frac{\lambda_0(t)\exp(\beta
x_{i})}{\lambda_0(t)\exp(\beta x_{j})} = \exp(\beta(x_i-x_j))\]</span>
<strong>Riesgos proporcionales:</strong> Nótese que la dependencia
temporal de las funciones de riesgo instantáneo individuales se canceló
dentro de la expresion anterior para el Hazard ratio, por tanto se dice
que los individuos <span class="math inline">\(i\)</span> y <span class="math inline">\(j\)</span> exhiben <em>riesgos proporcionales</em>
en el tiempo. Esta hipótesis constituye un pilar importante de los
estudios de efectividad bajo diseño de cohorte.</p>
<p>En el contexto de los estudios de cohorte, el modelo de Cox puede
utilizarse para estimar el riesgo comparativo entre ambos grupos de
presentar un desenlace de interés. En este sentido la pertenecia a un
grupo se utiliza como covariable dentro de la regresión.
Particularmente, para el cálculo de la efectividad vacunal se puede
utilizar el <span class="math inline">\(HR\)</span> de forma análoga al
caso discutido para el estimador Kaplan-Meier, con lo que se define:</p>
<p><span class="math display">\[V_{EFF} = 1 - HR\]</span></p>
</div>
</div>
</section><section><h2 class="section-heading" id="caso-de-uso-del-paquete">4. Caso de uso del paquete<a class="anchor" aria-label="anchor" href="#caso-de-uso-del-paquete"></a></h2>
<hr class="half-width"><p>Para esta sesión se trabajará con el conjunto de datos de ejemplo
incluido en el paquete <code>vaccineff</code>. Adicionalmente, se
utilizarán algunas funciones de los paquetes <code>ggplot2</code> y
<code>cowplot</code> para vizualizar algunos resultados.</p>
<p>Para installar <code>vaccineff</code> ejecute las siguientes líneas
en R:</p>
<div class="codewrapper sourceCode" id="cb1">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># if(!require("pak")) install.packages("pak")</span></span>
<span><span class="co"># pak::pak("epiverse-trace/vaccineff@dev")</span></span></code></pre>
</div>
<p>Posteriormente, para cargar los paquetes en el espacio de trabajo y
el set de datos de ejemplo del <code>vaccineff</code> ejecute:</p>
<div class="codewrapper sourceCode" id="cb2">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw">library</span><span class="op">(</span><span class="st">"vaccineff"</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="st">"ggplot2"</span><span class="op">)</span></span>
<span><span class="kw">library</span><span class="op">(</span><span class="st">"cowplot"</span><span class="op">)</span></span>
<span><span class="fu">data</span><span class="op">(</span><span class="va">cohortdata</span><span class="op">)</span></span>
<span><span class="fu">head</span><span class="op">(</span><span class="va">cohortdata</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>        id sex age death_date death_other_causes vaccine_date_1 vaccine_date_2
1 afade1b2   F  37       &lt;NA&gt;               &lt;NA&gt;           &lt;NA&gt;           &lt;NA&gt;
2 556c8c76   M  19       &lt;NA&gt;               &lt;NA&gt;           &lt;NA&gt;           &lt;NA&gt;
3 04edf85a   M  50       &lt;NA&gt;               &lt;NA&gt;           &lt;NA&gt;           &lt;NA&gt;
4 7e51a18e   F   8       &lt;NA&gt;               &lt;NA&gt;           &lt;NA&gt;           &lt;NA&gt;
5 c5a83f56   M  66       &lt;NA&gt;               &lt;NA&gt;           &lt;NA&gt;           &lt;NA&gt;
6 7f675ec3   M  29       &lt;NA&gt;               &lt;NA&gt;     2044-04-09     2044-04-30
  vaccine_1 vaccine_2
1      &lt;NA&gt;      &lt;NA&gt;
2      &lt;NA&gt;      &lt;NA&gt;
3      &lt;NA&gt;      &lt;NA&gt;
4      &lt;NA&gt;      &lt;NA&gt;
5      &lt;NA&gt;      &lt;NA&gt;
6    BRAND1    BRAND1</code></pre>
</div>
<p>Este tabla contiene información de una epidemia simulada ocurrida en
2044 sobre una población hipotética, compuesta por 100.000 habitantes,
que recibió dos dosis de una vacuna para disminuir el riesgo de muerte
por una enfermedad respiratoria viral. Sobre esta población se realizó
seguimiento por 1 año, entre el 1 de enero y 31 de diciembre de 2044. En
el conjunto de datos se presenta la información desagregada para cada
uno de los participantes.</p>
<div class="section level3">
<h3 id="funciones-básicas-de-exploración-de-datos"><strong>4.1 Funciones básicas de exploración de datos</strong><a class="anchor" aria-label="anchor" href="#funciones-b%C3%A1sicas-de-exploraci%C3%B3n-de-datos"></a></h3>
<div class="section level4">
<h4 id="grupo-etario"><strong>4.1.2 Grupo etario</strong><a class="anchor" aria-label="anchor" href="#grupo-etario"></a></h4>
<p>Para agrupar la población por grupo etario y graficar la distribución
por edad utilizaremos la función “get_age_group”. Para esto, ejectute el
siguiente comando en R:</p>
<div class="codewrapper sourceCode" id="cb4">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cohortdata</span><span class="op">$</span><span class="va">age_group</span> <span class="op">&lt;-</span> <span class="fu">get_age_group</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">cohortdata</span>,</span>
<span>  col_age <span class="op">=</span> <span class="st">"age"</span>,</span>
<span>  max_val <span class="op">=</span> <span class="fl">80</span>,</span>
<span>  min_val <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  step <span class="op">=</span> <span class="fl">9</span><span class="op">)</span></span></code></pre>
</div>
<p>Esta función permite agrupar la población en intervalos etarios a
partir de la variable “age” del conjunto de datos. En particular, para
construir la agrupación por decenios se asigna el ancho del intervalo
con step = 9, el mínimo valor de edad en 0 con “min_val” y el máximo
valor en 80 con “max_val”. Esto significa que cualquier registro con
edad mayor o igual a 80 años se agrupará en “&gt;80”</p>
<p>Puede graficar de forma rápida la distribución etaria asociada a la
variable “age_group” utilizando la función “geom_bar” de la librería
ggplot2. Para esto, ejecute el siguiente comando en R:</p>
<div class="codewrapper sourceCode" id="cb5">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span>data <span class="op">=</span> <span class="va">cohortdata</span>,</span>
<span>  <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">age_group</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_classic</span><span class="op">(</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/Vaccineff-tutorial-rendered-unnamed-chunk-4-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure></div>
<div class="section level4">
<h4 id="cobertura-vacunal-en-las-cohortes"><strong>4.1.2. Cobertura vacunal en las cohortes</strong><a class="anchor" aria-label="anchor" href="#cobertura-vacunal-en-las-cohortes"></a></h4>
<p>En un conjunto de datos típico de un estudio de cohorte se tiene
información desagregada por persona de la(s) dosis aplicada(s) durante
el seguimiento. En este sentido, es importante dimensionar el nivel de
cobertura en la vacunación alcanzado durante el seguimiento. vaccineff
ofrece la función “plot_coverage” que permite llevar a cabo esta tarea
con facilidad. Para esto, ejecute el siguiente comando en R:</p>
<div class="codewrapper sourceCode" id="cb6">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">plot_coverage</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">cohortdata</span>,</span>
<span>  vacc_date_col <span class="op">=</span> <span class="st">"vaccine_date_1"</span>,</span>
<span>  unit <span class="op">=</span> <span class="st">"month"</span>,</span>
<span>  doses_count_color <span class="op">=</span> <span class="st">"steelblue"</span>,</span>
<span>  coverage_color <span class="op">=</span> <span class="st">"mediumpurple"</span>,</span>
<span>  date_interval <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  cumulative <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/Vaccineff-tutorial-rendered-unnamed-chunk-5-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>Esta función calcula la cobertura con base en alguna dosis, la cual
se especifica en el parámetro “vacc_date_col”. En particular, en el
ejemplo anterior se utiliza la <u>primera dosi</u>s del conjunto de
datos de ejemplo (“vaccine_date_1”). Además, es posible agrupar el
conteo de dosis y el cálculo de cobertura en días, meses y años
utilizando el parámetro “unit” y personalizar los colores de la gráfica
con los parámetros “doses_count_color” y “coverage_color”. El parámetro
“date_interval” se utiliza para personalizar el intervalo de datos que
se quiere observar, en caso de usar “FALSE” la función toma las fechas
mínima y máxima de la tabla. Finalmente, el parámetro “cumulative”
permite graficar el conteo de dosis de forma acumulada en el tiempo.</p>
</div>
</div>
<div class="section level3">
<h3 id="seguimiento-de-la-cohorte-y-tiempos-al-evento"><strong>4.2 Seguimiento de la cohorte y tiempos al
evento</strong><a class="anchor" aria-label="anchor" href="#seguimiento-de-la-cohorte-y-tiempos-al-evento"></a></h3>
<p>Para llevar a cabo la estimación de la efectividad vacunal primero
debe definir la fecha de inicio y fin del seguimiento de cohortes, esto
con base en su exploración de las bases de datos. Para el caso
particular del conjunto de datos ejemplo contenidos es
<code>vaccineff</code> se utiliza:</p>
<div class="codewrapper sourceCode" id="cb7">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">start_cohort</span> <span class="op">&lt;-</span> <span class="fu">as.Date</span><span class="op">(</span><span class="st">"2044-01-01"</span><span class="op">)</span></span>
<span><span class="va">end_cohort</span> <span class="op">&lt;-</span> <span class="fu">as.Date</span><span class="op">(</span><span class="st">"2044-12-31"</span><span class="op">)</span></span></code></pre>
</div>
<p>Para determinar la fecha de immunización, de un individuo
<code>vaccineff</code> cuenta con la función
<code>get_immunization_date()</code>. Esta calcula la fecha de
inmunización seleccionando la vacuna que cumpla con el criterio de
<em>fecha límite</em> presentado en la siguiente figura.</p>
<figure><img src="fig/limit_imm.png" alt="Esquema de fecha límite para selección de vacunas" class="figure mx-auto d-block"><div class="figcaption">Esquema de fecha límite para selección de
vacunas</div>
</figure><div class="section level4">
<h4 id="tiempo-de-inducción-del-efecto-delay"><strong>4.2.2 Tiempo de inducción del efecto
<em>(delay)</em></strong><a class="anchor" aria-label="anchor" href="#tiempo-de-inducci%C3%B3n-del-efecto-delay"></a></h4>
<p>En la figura anterior se introdujo el concepto de <em>delay</em>. El
<em>delay del desenlace</em> hace referencia al tiempo característico al
desenlace desde que se un individuo se infecta. Por otra parte, el
<em>delay de la immunización</em> se refiere al tiempo que se espera que
transcurra antes de considerar que existe inmunidad protectora. Cada uno
de estas variables puede controlarse en la función mediante los
parámetros <code>outcome_delay</code> e <code>immunization_delay</code>,
respectivamente. El valor que se asigne a estas depende de la naturaleza
del estudio. En particular, para nuestra epidemia ejemplo utilizaremos
<code>outcome_delay = 0</code> dado que no es considerado como una
variable relevante para determinar la fecha límite en que la vacuna
podría hacer efecto. Por otra parte, el valor asumido para el de
immunización es de 14 días.</p>
<p>Para calcular la fecha de immunización de cada individiduo escriba la
siguiente instrucción en R y ejecútela:</p>
<div class="codewrapper sourceCode" id="cb8">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cohortdata</span><span class="op">$</span><span class="va">immunization</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu">get_immunization_date</span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="va">cohortdata</span>,</span>
<span>    outcome_date_col <span class="op">=</span> <span class="st">"death_date"</span>,</span>
<span>    outcome_delay <span class="op">=</span> <span class="fl">0</span>,</span>
<span>    immunization_delay <span class="op">=</span> <span class="fl">14</span>,</span>
<span>    vacc_date_col <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"vaccine_date_1"</span>, <span class="st">"vaccine_date_2"</span><span class="op">)</span>,</span>
<span>    end_cohort <span class="op">=</span> <span class="va">end_cohort</span>,</span>
<span>    take_first <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre>
</div>
<p>Al ejecutar este comando, se añadirá una columna nueva al conjunto de
datos del caso de estudio, esta columna contiene una variable de tipo
“Date” que corresponde la fecha 14 días posteriores a la última dosis de
cualquiera de las dos vacunas utilizadas en el caso de estudio, que
cumpla con el criterio de <em>fecha límite</em>. Puede evidenciar la
nueva columna en el conjunto de datos.</p>
</div>
<div class="section level4">
<h4 id="definir-la-exposición-cohorte-vacunada-y-cohorte-no-vacunada"><strong>4.2.3. Definir la exposición: cohorte vacunada y cohorte no
vacunada</strong><a class="anchor" aria-label="anchor" href="#definir-la-exposici%C3%B3n-cohorte-vacunada-y-cohorte-no-vacunada"></a></h4>
<p>A continuación, cree una columna nueva donde categorice cada uno de
los sujetos según su estado vacunal, vacunados como “v” y no vacunados
como “u” (unvaccinated, en inglés). Para esto ejecute el siguiente
comando en R:</p>
<div class="codewrapper sourceCode" id="cb9">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cohortdata</span><span class="op">$</span><span class="va">vaccine_status</span> <span class="op">&lt;-</span> <span class="fu">set_status</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">cohortdata</span>,</span>
<span>  col_names <span class="op">=</span> <span class="st">"immunization"</span>,</span>
<span>  status <span class="op">=</span> <span class="fu">c</span><span class="op">(</span><span class="st">"vacc"</span>, <span class="st">"unvacc"</span><span class="op">)</span><span class="op">)</span></span></code></pre>
</div>
<p>Al ejecutar el comando encontrará que se ha creado una nueva columna
en el conjunto de datos con los valores “vacc” o “unvacc”, para cada uno
de los registros de acuerdo con su estado de vacunación, el cual se
determina a partir de la variable <code>"immunization"</code>.</p>
</div>
<div class="section level4">
<h4 id="definir-el-desenlace-estado-vivo-vs-estado-fallecido"><strong>4.2.3 Definir el desenlace: estado vivo vs estado
fallecido</strong><a class="anchor" aria-label="anchor" href="#definir-el-desenlace-estado-vivo-vs-estado-fallecido"></a></h4>
<p>El desenlace para este ejercicio va a ser la condición vital al final
del estudio. En otros ejercicios el desenlace de interés podría ser la
hospitalización o la infección, dependiendo del conjunto de datos
utilizado.</p>
<p>Tenga en cuenta que en conjunto de datos del caso de estudio todas
las defunciones son debidas a la infección por el virus de interés. Para
definir el desenlace de interés de acuerdo a la condición vital de los
participantes en la cohorte, ejecute el siguiente comando en R:</p>
<div class="codewrapper sourceCode" id="cb10">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cohortdata</span><span class="op">$</span><span class="va">death_status</span> <span class="op">&lt;-</span> <span class="fu">set_status</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">cohortdata</span>,</span>
<span>  col_names <span class="op">=</span> <span class="st">"death_date"</span><span class="op">)</span></span></code></pre>
</div>
<p>Al ejecutar este comando, nuevamente aparecerá una nueva columna en
el conjunto de datos con el que se está realizando el caso de estudio.
Al explorar la base de datos completa, se verifica que en la nueva
columna aparece 0 = vivo y 1 = fallecido.</p>
</div>
<div class="section level4">
<h4 id="calcular-el-tiempo-al-evento-desde-exposición-hasta-desenlace"><strong>4.2.4. Calcular el tiempo al evento (desde exposición hasta
desenlace)</strong><a class="anchor" aria-label="anchor" href="#calcular-el-tiempo-al-evento-desde-exposici%C3%B3n-hasta-desenlace"></a></h4>
<p>Ahora, calcule para cada una de las personas el tiempo que fue
seguido en el estudio. Recuerde que el seguimiento se hace igual para
ambas cohortes (vacunada y no vacunada) y finaliza cuando termina el
estudio o cuando se presenta el desenlace de interés. Para obtener este
dato ejecute el siguiente comando en R:</p>
<div class="codewrapper sourceCode" id="cb11">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cohortdata</span><span class="op">$</span><span class="va">time_to_death</span> <span class="op">&lt;-</span> <span class="fu">get_time_to_event</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">cohortdata</span>,</span>
<span>  outcome_date_col <span class="op">=</span> <span class="st">"death_date"</span>,</span>
<span>  start_cohort <span class="op">=</span> <span class="va">start_cohort</span>,</span>
<span>  end_cohort <span class="op">=</span> <span class="va">end_cohort</span>,</span>
<span>  start_from_immunization <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre>
</div>
<p>Nuevamente, al ejecutar este comando se creará una nueva variable en
el conjunto de datos y como se puede evidenciar al explorar los datos
completos, la nueva variable estima los días de seguimiento para cada
una de las personas. Esta función permite crear tiempos al evento desde
el inicio del seguimiento en el caso de estudio, en este caso se utiliza
la opción “start_from_immunization = FALSE” o desde la fecha de
inmunización. Para este último caso es necesario asignar
“start_from_immunization = TRUE” y pasar el nombre de la columna con la
información sobre la fecha de inmunización en el parámetro
“immunization_date_col”. En la figura a continuación se presenta un
esquema de los dos métodos de cálculo del tiempo al evento.</p>
<figure><img src="fig/time-to-event.png" alt="a) Tiempo al evento evaludado desde inicio de la cohorte. b) tiempo al evento desde la fecha de immunización" class="figure mx-auto d-block"><div class="figcaption">a) Tiempo al evento evaludado desde inicio de la
cohorte. b) tiempo al evento desde la fecha de immunización</div>
</figure></div>
</div>
<div class="section level3">
<h3 id="curvas-de-riesgo-acumulado-y-supervivencia-al-desenlace-en-cada-cohorte">4.3. Curvas de riesgo acumulado y supervivencia al desenlace en cada
cohorte<a class="anchor" aria-label="anchor" href="#curvas-de-riesgo-acumulado-y-supervivencia-al-desenlace-en-cada-cohorte"></a></h3>
<p>Como primera aproximación a la efectividad vacunal, graficaremos la
curva de riesgos acumulados (1 menos la supervivencia de las
poblaciones). Esta nos permite entender de forma cualitativa cuál de las
poblaciones acumula mayor riesgo durante el estudio de cohorte. Y por
tanto, evaluar hipótesis sobre el potencial efecto de la vacunación
sobre la cohorte. Para graficar el riesgo acumulado ejecute el siguiente
comando en R:</p>
<div class="codewrapper sourceCode" id="cb12">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">plot_survival</span><span class="op">(</span>data <span class="op">=</span> <span class="va">cohortdata</span>,</span>
<span>  outcome_status_col <span class="op">=</span> <span class="st">"death_status"</span>,</span>
<span>  time_to_event_col <span class="op">=</span> <span class="st">"time_to_death"</span>,</span>
<span>  vacc_status_col <span class="op">=</span> <span class="st">"vaccine_status"</span>,</span>
<span>  vaccinated_status <span class="op">=</span> <span class="st">"vacc"</span>,</span>
<span>  unvaccinated_status <span class="op">=</span> <span class="st">"unvacc"</span>,</span>
<span>  vaccinated_color <span class="op">=</span> <span class="st">"steelblue"</span>,</span>
<span>  unvaccinated_color <span class="op">=</span> <span class="st">"darkred"</span>,</span>
<span>  start_cohort <span class="op">=</span> <span class="va">start_cohort</span>,</span>
<span>  end_cohort <span class="op">=</span> <span class="va">end_cohort</span>,</span>
<span>  percentage <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  cumulative <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
<figure><img src="fig/Vaccineff-tutorial-rendered-unnamed-chunk-11-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure><p>A partir de la función anterior también es posible realizar la
gráfica de supervivencia de las cohortes o gráfica de Kaplan-Meier en la
cual se parte del 100% de ambas cohortes en el eje de las ordenadas y en
el eje de las abscisas se representa el tiempo y se observa la
disminución que hay debido a las defunciones en cada cohorte. Tenga en
cuenta que este no es el estimador de Kaplan-Meir, es sólo la gráfica
sobre las curvas de supervivencia y de riesgo acumulado. Para obtener
este gráfico, se ejecuta la misma función y se cambia el argumento
“percentage” por FALSE:</p>
<div class="codewrapper sourceCode" id="cb13">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">plt_surv</span> <span class="op">&lt;-</span> <span class="fu">plot_survival</span><span class="op">(</span>data <span class="op">=</span> <span class="va">cohortdata</span>,</span>
<span>  outcome_status_col <span class="op">=</span> <span class="st">"death_status"</span>,</span>
<span>  time_to_event_col <span class="op">=</span> <span class="st">"time_to_death"</span>,</span>
<span>  vacc_status_col <span class="op">=</span> <span class="st">"vaccine_status"</span>,</span>
<span>  vaccinated_status <span class="op">=</span> <span class="st">"vacc"</span>,</span>
<span>  unvaccinated_status <span class="op">=</span> <span class="st">"unvacc"</span>,</span>
<span>  vaccinated_color <span class="op">=</span> <span class="st">"steelblue"</span>,</span>
<span>  unvaccinated_color <span class="op">=</span> <span class="st">"darkred"</span>,</span>
<span>  start_cohort <span class="op">=</span> <span class="va">start_cohort</span>,</span>
<span>  end_cohort <span class="op">=</span> <span class="va">end_cohort</span>,</span>
<span>  percentage <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  cumulative <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="va">plt_surv</span></span></code></pre>
</div>
<figure><img src="fig/Vaccineff-tutorial-rendered-unnamed-chunk-12-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure></div>
<div class="section level3">
<h3 id="evaluación-de-la-hipótesis-riesgos-proporcionales"><strong>4.4. Evaluación de la hipótesis riesgos
proporcionales</strong><a class="anchor" aria-label="anchor" href="#evaluaci%C3%B3n-de-la-hip%C3%B3tesis-riesgos-proporcionales"></a></h3>
<p>Previo a la estimación de la efectividad vacunal es importante
testear la hipótesis de riesgos proporcionales entre las cohortes de
vacunados y no vacunados, con el fin de identificar posibles sesgos
muestrales que afecten la validez de los resultados y definir
estrategias de cálculo de cohortes dinámicas, emparejamiento o
estratificación, entre otras, que permitar contrarestar este efecto. Un
método cualitativo utilizado ampliamente en la literatura es la
transformación de la probabilidad de supervivencia mediante la función
logaritmo natural como <span class="math inline">\(\log[-\log[S(t)]]\)</span>. Al graficar esta
función contra el logaritmo del tiempo al evento, es posible identificar
si los grupos representan riesgos proporcionales cuando sus curvas se
comportan de forma aproximadamente paralela.</p>
<p>A continuación se presentan las gráficas loglog obtenidas al
construir los tiempos al evento de forma dinámica (panel de la izquiera)
y con punto de inicio fijo (panel de la derecha). Particularmente, se
observa que el cálculo dinámico de los tiempos no satisface riesgos
proporcionales, por lo que pontencialmente necesitará algún tipo de
estrategia para contrarestar los posibles sesgos muestrales.</p>
<figure><img src="fig/Vaccineff-tutorial-rendered-unnamed-chunk-13-1.png" style="display: block; margin: auto;" class="figure mx-auto d-block"></figure></div>
<div class="section level3">
<h3 id="estimación-de-la-efectividad-vacunal"><strong>4.5. Estimación de la efectividad vacunal</strong><a class="anchor" aria-label="anchor" href="#estimaci%C3%B3n-de-la-efectividad-vacunal"></a></h3>
<div class="section level4">
<h4 id="modelo-de-cox"><strong>Modelo de Cox</strong><a class="anchor" aria-label="anchor" href="#modelo-de-cox"></a></h4>
<p>En todos los estudios observacionales de efectividad vacunal de
cohorte se compara el riesgo (o tasa de incidencia) entre los vacunados
y no vacunados de desarrollar el desenlace de interés (infección,
enfermedad, muerte, etc). La medida de riesgo a utilizar dependerá de
las características de la cohorte y puede expresarse en términos de
<em>relative risk</em> (RR) o <em>hazard ratio</em> (HR).</p>
<p>En este ejercicio utilizaremos el modelo de regresión de riesgos
proporcionales de Cox para estimar el <em>hazar ratio</em> y con esta
medida estimar la efectividad mediante</p>
<p><code>VE= 1-HR</code></p>
<p>Para estimar la efectividad vacunal en términos de HR, ejecute el
siguiente comando en R:</p>
<div class="codewrapper sourceCode" id="cb14">
<h3 class="code-label">R<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">coh_eff_noconf</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">cohortdata</span>,</span>
<span>  outcome_status_col <span class="op">=</span> <span class="st">"death_status"</span>,</span>
<span>  time_to_event_col <span class="op">=</span> <span class="st">"time_to_death"</span>,</span>
<span>  status_vacc_col <span class="op">=</span> <span class="st">"vaccine_status"</span><span class="op">)</span></span></code></pre>
</div>
<div class="codewrapper">
<h3 class="code-label">SALIDA<i aria-hidden="true" data-feather="chevron-left"></i><i aria-hidden="true" data-feather="chevron-right"></i>
</h3>
<pre class="output" tabindex="0"><code>      HR HR_low HR_high  V_eff V_eff_low V_eff_high     PH      p_value
1 0.2684 0.1855  0.3884 0.7316    0.6116     0.8145 reject 0.0009088627</code></pre>
</div>
</div>
</div>
<div class="section level3">
<h3 id="cohorte-dinámica---emparejamiento-poblacional"><strong>4.6 Cohorte dinámica - Emparejamiento
poblacional</strong><a class="anchor" aria-label="anchor" href="#cohorte-din%C3%A1mica---emparejamiento-poblacional"></a></h3>
<p>El comando anterior arrojó la efectividad vacunal obtenida mediante
el model de Cox. Sin embargo, en la columna PH aparece la palabra
rejected. Esto significa que pese a que las curvas de ambos grupos son
paralelas la evaluación de la hipótesis de riesgos proporcionales
haciendo uso del test de <em>Schoenfeld</em> no es satisfactoria. Esto
debido a los potenciales sesgos muestrales inducidos por la estrategia
de vacunación desplegada sobre la población. Una estrategia para
contrarestas dichos sesgos es el emparejamiento dinámico de la
población. En la siguiente figura se presenta un esquema de
emparejamiento orientado a disminuir los sesgos muestrales.</p>
<figure><img src="fig/matching.png" class="figure mx-auto d-block"></figure></div>
<div class="section level3">
<h3 id="próximos-características"><strong>4.7 Próximos características</strong><a class="anchor" aria-label="anchor" href="#pr%C3%B3ximos-caracter%C3%ADsticas"></a></h3>
<ul><li><p>Estimador Kaplan-Meier</p></li>
<li><p>Curva loglog para evaluación de riesgos proporcionales</p></li>
<li><p>Matching dinámico</p></li>
<li><p>Censura</p></li>
</ul></div>
</section><section><h2 class="section-heading" id="reflexión">5. Reflexión<a class="anchor" aria-label="anchor" href="#reflexi%C3%B3n"></a></h2>
<hr class="half-width"><p>En esta sesión se llevó a cabo una estimación básica de la
efectividad vacunal mediante un estudio de cohorte, haciendo uso de los
estimador Kaplan-Meier y del modelo de Cox. Adicionalmente, se estudió
la hipótesis de riesgos proporcionales para los grupos vacunado y no
vacunado comparando la construcción de tiempos al evento de forma
dinámica y fija. Se observó que pese a que la hipótesis de riesgos
proporcionales se corrobora gráficamente en la consrucción de los
tiempos al evento con fecha de inicio fija, al evaluar el modelo de
riesgos proporcionales de Cox el test de Schoenfeld rechaza esta
hipótesis. En general la decisión sobre aceptar o no los resultados es
altamente dependiente del acceso a información adicional relevante que
permita realizar ajustes a la estimación y capturar dinámicas
relevantes.</p>
<hr></section><section><h2 class="section-heading" id="reto">Reto<a class="anchor" aria-label="anchor" href="#reto"></a></h2>
<hr class="half-width"><p><a href="https://docs.google.com/document/d/1_33E0LufZP7FNO9Q491aFquV26eS4p2h/edit?usp=sharing&amp;ouid=108718106243006326200&amp;rtpof=true&amp;sd=true" class="external-link">Reto</a></p>
<hr><div id="keypoints1" class="callout keypoints">
<div class="callout-square">
<i class="callout-icon" data-feather="key"></i>
</div>
<div class="callout-inner">
<h3 class="callout-title">Puntos Clave</h3>
<div class="callout-content">
<ul><li><p>Estudiar algunos de los conceptos claves para la implementación
de estudios observacionales con diseño de cohortes</p></li>
<li><p>Calcular las métricas claves para llevar a cabo un estudio de
cohortes</p></li>
<li><p>Discutir las ventajas y desventajas de los métodos de estimación
no paramétricos y semi-paramétricos de modelos de
superviviencia</p></li>
<li><p>Aplicar estrategias de emparejamiento de casos y control y
discutir su potencial efecto sobre los estudios de cohortes</p></li>
<li><p>Estimar la efectividad vacunal haciendo uso de un diseño de
cohortes</p></li>
</ul></div>
</div>
</div>
<div class="section level3">
<h3 id="sobre-este-documento">Sobre este documento<a class="anchor" aria-label="anchor" href="#sobre-este-documento"></a></h3>
<p>Este documento ha sido diseñado por David Santiago Quevedo para el
Curso Internacional: Análisis de Brotes y Modelamiento en Salud Pública,
Bogotá 2023. TRACE-LAC/Javeriana.</p>
<div class="section level4">
<h4 id="contribuciones">Contribuciones<a class="anchor" aria-label="anchor" href="#contribuciones"></a></h4>
<ul><li><p>David Santiago Quevedo</p></li>
<li><p>Santiago Loaiza</p></li>
<li><p>Zulma Cucunubá</p></li>
</ul><!--
Place links that you need to refer to multiple times across pages here. Delete
any links that you are not going to use.
 --></div>
</div>
</section></div> <!-- / div.lesson-content -->
    </main><!-- / main#main-content.main-content --><nav class="bottom-pagination mx-md-4" aria-label="Capítulo previo y siguiente"><div class="d-block d-sm-block d-md-none">
        <a class="chapter-link" href="Serofoi-tutorial.html"><i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>Previo</a>
        <a class="chapter-link float-end" href="epiCo-tutorial.html">Siguiente<i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i></a>
      </div>
      <!-- content for large screens -->
      <div class="d-none d-sm-none d-md-block">
        <a class="chapter-link" href="Serofoi-tutorial.html" rel="prev">
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-left"></i>
          Previo: Estima la fuerza de
        </a>
        <a class="chapter-link float-end" href="epiCo-tutorial.html" rel="next">
          Siguiente: Indicadores...
          <i aria-hidden="true" class="small-arrow" data-feather="arrow-right"></i>
        </a>
      </div>
    </nav></div> <!-- / div.primary-content.col-xs-12 -->
<!-- END:   inst/pkgdown/templates/content-instructor.html-->

      </div><!--/div.row-->
      		<footer class="row footer mx-md-3"><hr><div class="col-md-6">
        <p>Esta lección está sujeta al <a href="CODE_OF_CONDUCT.html">Código de Conducta</a></p>
        <p>

        <a href="https://github.com/epiverse-trace/epimodelac/edit/main/episodes/Vaccineff-tutorial.Rmd" class="external-link">Editar en GitHub</a>

	
        | <a href="https://github.com/epiverse-trace/epimodelac/blob/main/CONTRIBUTING.md" class="external-link">Contribuir</a>
        | <a href="https://github.com/epiverse-trace/epimodelac/" class="external-link">Fuente</a></p>
				<p><a href="https://github.com/epiverse-trace/epimodelac/blob/main/CITATION" class="external-link">Cita</a> | <a href="mailto:team@carpentries.org">Contacto</a> | <a href="https://carpentries.org/about/" class="external-link">Acerca de</a></p>
			</div>
			<div class="col-md-6">

        <p>Materials licensed under <a href="LICENSE.html">CC-BY 4.0</a> by the authors</p>

        <p>Plantilla compartida bajo <a href="https://creativecommons.org/licenses/by-sa/4.0/" class="external-link">CC-BY 4.0</a> por <a href="https://carpentries.org/" class="external-link">The Carpentries</a></p>
        <p>Construido con <a href="https://github.com/epiverse-trace/sandpaper/tree/patch-renv-github-bug" class="external-link">sandpaper (0.16.11)</a>, <a href="https://github.com/carpentries/pegboard/tree/5e0d711121a581777d83cf270e298c933f112d52" class="external-link">pegboard (0.7.9)</a> y <a href="https://github.com/epiverse-trace/varnish/tree/tracelactheme" class="external-link">varnish (1.0.1.9000)</a></p>
			</div>
		</footer></div> <!-- / div.container -->
	<div id="to-top">
		<a href="#top">
      <i class="search-icon" data-feather="arrow-up" role="img" aria-label="Volver al inicio"></i><br><!-- <span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Back</span> To Top --><span class="d-none d-sm-none d-md-none d-lg-none d-xl-block">Volver</span> al inicio
		</a>
	</div>
  <script type="application/ld+json">
    {
  "@context": "https://schema.org",
  "@type": "TrainingMaterial",
  "@id": "https://epiverse-trace.github.io/epimodelac/Vaccineff-tutorial.html",
  "inLanguage": "es",
  "dct:conformsTo": "https://bioschemas.org/profiles/TrainingMaterial/1.0-RELEASE",
  "description": "A Carpentries Lesson teaching foundational data and coding skills to researchers worldwide",
  "keywords": "software, data, lesson, The Carpentries",
  "name": "Introducción al cálculo de efectividad vacunal con cohortes usando vaccineff",
  "creativeWorkStatus": "active",
  "url": "https://epiverse-trace.github.io/epimodelac/Vaccineff-tutorial.html",
  "identifier": "https://epiverse-trace.github.io/epimodelac/Vaccineff-tutorial.html",
  "dateCreated": "2023-11-10",
  "dateModified": "2025-03-25",
  "datePublished": "2025-04-01"
}

  </script><script>
		feather.replace();
	</script><!-- Matomo
    2022-11-07: we have gotten a notification that we have an overage for our
    tracking and I'm pretty sure this has to do with Workbench usage.
    Considering that I am not _currently_ using this tracking because I do not
    yet know how to access the data, I am turning this off for now.
  <script>
    var _paq = window._paq = window._paq || [];
    /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
    _paq.push(["setDocumentTitle", document.domain + "/" + document.title]);
    _paq.push(["setDomains", ["*.preview.carpentries.org","*.datacarpentry.github.io","*.datacarpentry.org","*.librarycarpentry.github.io","*.librarycarpentry.org","*.swcarpentry.github.io", "*.carpentries.github.io"]]);
    _paq.push(["setDoNotTrack", true]);
    _paq.push(["disableCookies"]);
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
          var u="https://carpentries.matomo.cloud/";
          _paq.push(['setTrackerUrl', u+'matomo.php']);
          _paq.push(['setSiteId', '1']);
          var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
          g.async=true; g.src='https://cdn.matomo.cloud/carpentries.matomo.cloud/matomo.js'; s.parentNode.insertBefore(g,s);
        })();
  </script>
  End Matomo Code --></body></html><!-- END:   inst/pkgdown/templates/layout.html-->

